<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Chat</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- Landing Panel (visible initially, hidden once connected) -->
    <div id="landing-panel" class="landing-panel">
        <div class="landing-content">
            <h1>Join Chat Room</h1>
            <form id="join-form" class="join-form">
                <div class="form-group">
                    <label for="room-name">Room Name:</label>
                    <input type="text" id="room-name" name="room-name" placeholder="Enter room name" required>
                </div>
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" required>
                </div>
                <button type="submit" id="join-btn">Join Room</button>
            </form>
        </div>
    </div>

    <!-- Main Chat Layout (hidden initially, shown once connected) -->
    <div id="chat-container" class="chat-container" style="display: none;">
        <!-- Header Section -->
        <header id="chat-header" class="chat-header">
            <div class="header-content">
                <h2 id="current-room" class="current-room">Room: </h2>
                <div id="connection-status" class="connection-status">
                    <span class="status-indicator offline"></span>
                    <span id="status-text">Disconnected</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Sidebar - Online Users -->
            <aside id="users-sidebar" class="users-sidebar">
                <h3>Online Users</h3>
                <ul id="users-list" class="users-list">
                    <!-- Users will be populated dynamically -->
                </ul>
            </aside>

            <!-- Central Message Area -->
            <main id="messages-container" class="messages-container">
                <div id="messages-pane" class="messages-pane">
                    <!-- Messages will be populated dynamically -->
                </div>
            </main>
        </div>

        <!-- Fixed Footer with Message Input -->
        <footer id="message-footer" class="message-footer">
            <form id="message-form" class="message-form">
                <div class="input-container">
                    <input type="file" id="file-input" accept="image/*,video/*" style="display:none;" />
                    <button type="button" id="upload-btn" class="send-btn" title="Attach image or video" style="padding:12px 16px;">ðŸ“Ž</button>
                    <textarea 
                        id="message-input" 
                        class="message-input" 
                        placeholder="Type your message..." 
                        rows="1"
                        maxlength="500"
                        required></textarea>
                    <button type="submit" id="send-btn" class="send-btn">Send</button>
                </div>
            </form>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="/static/app.js"></script>
    <!-- Bottom bar: Play Store + Privacy -->
    <div id="bottom-bar" class="bottom-bar">
        <a id="play-store-btn" class="bottom-button" href="https://play.google.com/store/apps/details?id=com.example.app" target="_blank" rel="noopener">Get on Google Play</a>
        <button id="privacy-btn" class="bottom-button">Privacy Policy</button>
    </div>

    <!-- Privacy Banner / Modal -->
    <div id="privacy-banner" class="privacy-banner" style="display: none;">
        <div class="privacy-content">
            <p>This project does not capture screenshots or personal data by default. By using this application you agree to the <a href="#" id="privacy-link">privacy policy</a>.</p>
            <div class="privacy-actions">
                <button id="accept-privacy" class="accept-btn">Accept</button>
                <button id="learn-more" class="learn-more-btn">Learn more</button>
            </div>
        </div>
    </div>

    <div id="privacy-modal" class="privacy-modal" style="display:none;">
        <div class="privacy-modal-content">
            <h3>Privacy Policy</h3>
            <p>This application is a demo chat service. It does not capture screenshots, record audio, or access your files. The server stores message text and lightweight metadata (username, timestamp) required for chat functionality. If you integrate third-party services that collect additional data, make sure to disclose them here.</p>
            <p>For questions, contact the project owner.</p>
            <div style="text-align:right; margin-top:12px;"><button id="close-privacy" class="accept-btn">Close</button></div>
        </div>
    </div>
</body>
</html>
